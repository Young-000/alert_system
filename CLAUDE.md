# Alert System

ì¶œê·¼/í‡´ê·¼ ì‹œ ë‚ ì”¨, ë¯¸ì„¸ë¨¼ì§€, ë²„ìŠ¤/ì§€í•˜ì²  ë„ì°©ì‹œê°„ í†µí•© ì•Œë¦¼ ì‹œìŠ¤í…œ

---

## ğŸ¯ ì˜ì‚¬ê²°ì • ê¸°ì¤€ (Architecture Decision Principles)

**ì´ í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ  ì„ íƒ ì‹œ ë°˜ë“œì‹œ ë”°ë¥¼ ì›ì¹™:**

### 1. ì—…ê³„ í‘œì¤€ ìš°ì„  (Industry Standard First)
```
âŒ "ê¸°ì¡´ ì½”ë“œì— ë§ì¶”ë©´ ë¹ ë¥´ë‹ˆê¹Œ X ì“°ì"
âœ… "ì—…ê³„ì—ì„œ ê°€ì¥ ë§ì´ ì“°ëŠ” ê²Œ ë­ì§€? â†’ ê·¸ê±¸ ì“°ì"
```
- AWS, GCP ê°™ì€ ë©”ì´ì € í´ë¼ìš°ë“œ ìš°ì„ 
- ê²€ìƒ‰í•˜ë©´ ë‹µì´ ë°”ë¡œ ë‚˜ì˜¤ëŠ” ê¸°ìˆ  ì„ íƒ
- ì´ë ¥ì„œì— ì“¸ ìˆ˜ ìˆëŠ” ê¸°ìˆ  ìŠ¤íƒ

### 2. ì˜¬ë°”ë¥¸ êµ¬ì¡° > ì‰¬ìš´ êµ¬ì¡° (Correct > Easy)
```
âŒ "í™˜ê²½ë³€ìˆ˜ë§Œ ë°”ê¾¸ë©´ ë˜ë‹ˆê¹Œ ì´ê±° ì“°ì"
âœ… "ì´ ë¬¸ì œë¥¼ ì œëŒ€ë¡œ í•´ê²°í•˜ëŠ” ë°©ë²•ì´ ë­ì§€?"
```
- ê¸°ì¡´ ì½”ë“œ ìœ ì§€ë³´ë‹¤ **ì˜¬ë°”ë¥¸ ì•„í‚¤í…ì²˜** ìš°ì„ 
- ë‹¨ê¸° í¸ì˜ë³´ë‹¤ **ì¥ê¸° í™•ì¥ì„±** ê³ ë ¤
- "ë‚˜ì¤‘ì— ë°”ê¾¸ë©´ ë˜ì§€"ëŠ” ê¸ˆì§€

### 3. í•µì‹¬ ê¸°ëŠ¥ì— ìµœê³  í’ˆì§ˆ (Best for Core Features)
```
ì´ í”„ë¡œì íŠ¸ì˜ í•µì‹¬: ê°œì¸ë³„ ìŠ¤ì¼€ì¤„ë§
â†’ ìŠ¤ì¼€ì¤„ë§ì—ëŠ” ê°€ì¥ ì¢‹ì€ ì†”ë£¨ì…˜ ì‚¬ìš© (AWS EventBridge)
```
- í•µì‹¬ ê¸°ëŠ¥ ì‹ë³„ â†’ ê·¸ ë¶€ë¶„ì— íˆ¬ì
- ë¶€ê°€ ê¸°ëŠ¥ì€ ê°„ë‹¨í•˜ê²Œ í•´ë„ ë¨

### 4. ë¹„ìš©ë³´ë‹¤ ê°€ì¹˜ (Value > Cost)
```
âŒ "ë¬´ë£Œë‹ˆê¹Œ ì´ê±° ì“°ì"
âœ… "ì›” $30 ë” ë‚´ë©´ ì œëŒ€ë¡œ ëœ ì„œë¹„ìŠ¤ ì“¸ ìˆ˜ ìˆë„¤"
```
- Free Tierì— ë§ì¶”ë ¤ê³  êµ¬ì¡°ë¥¼ ë§ê°€ëœ¨ë¦¬ì§€ ì•Šê¸°
- í•™ìŠµ ê°€ì¹˜, ì´ë ¥ì„œ ê°€ì¹˜ë„ ë¹„ìš©ì— í¬í•¨

---

## Overview

| í•­ëª© | ê°’ |
|------|-----|
| **Frontend URL** | https://frontend-xi-two-52.vercel.app |
| **Backend URL** | https://alert-system-kdg9.onrender.com |
| **Supabase** | Project 2 - `gtnqsbdlybrkbsgtecvy` |
| **Schema** | `alert_system` |

## ê¸°ìˆ  ìŠ¤íƒ (AWS ì „í™˜ ì˜ˆì •)

| ì˜ì—­ | í˜„ì¬ | ëª©í‘œ (AWS) |
|------|------|------------|
| **Backend** | Render (NestJS) | AWS Lambda ë˜ëŠ” ECS |
| **Frontend** | Vercel (React) | Vercel ìœ ì§€ ë˜ëŠ” CloudFront |
| **Database** | Supabase | Supabase ìœ ì§€ (ë˜ëŠ” RDS) |
| **Scheduling** | In-Memory (ì†ì‹¤ë¨) | **EventBridge Scheduler** |
| **Cache** | ì—†ìŒ | ElastiCache Redis |
| **Queue** | BullMQ (ë¹„í™œì„±) | SQS |

## ì§„í–‰ìƒí™©

| ì˜ì—­ | ìƒíƒœ | ë¹„ê³  |
|------|:----:|------|
| Frontend | âœ… | Vercel ë°°í¬ |
| Backend | âœ… | Render (ì „í™˜ ì˜ˆì •) |
| DB ì—°ê²° | âœ… | Supabase |
| ë°°í¬ | âœ… | |
| **AWS ì „í™˜** | ğŸ”„ | ì§„í–‰ ì¤‘ |

## DB í…Œì´ë¸”

```sql
-- alert_system ìŠ¤í‚¤ë§ˆ ì‚¬ìš©
alert_system.users
alert_system.alerts
alert_system.subway_stations
alert_system.push_subscriptions
```

## í™˜ê²½ ë³€ìˆ˜

### Backend (.env)
```env
DATABASE_URL=postgresql://postgres.gtnqsbdlybrkbsgtecvy:...@supabase.com:5432/postgres
DB_SYNCHRONIZE=true  # ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œë§Œ
AIR_QUALITY_API_KEY=...
REDIS_HOST=...
```

### Frontend (.env)
```env
VITE_API_BASE_URL=https://alert-system-kdg9.onrender.com
VITE_VAPID_PUBLIC_KEY=...
```

## ê°œë°œ ëª…ë ¹ì–´

```bash
# Backend
cd backend && npm run start:dev

# Frontend
cd frontend && npm run dev

# Docker
docker-compose up -d redis
```

## Known Issues (í”„ë¡œì íŠ¸ ê³ ìœ )

### Render Cold Start (AWS ì „í™˜ìœ¼ë¡œ í•´ê²° ì˜ˆì •)
Backend (Render Free Tier) ì²« ìš”ì²­ ì‹œ ~30ì´ˆ ì§€ì—°
â†’ AWS Lambda/ECS ì „í™˜ ì‹œ í•´ê²°

### In-Memory Scheduler ì†ì‹¤ (AWS ì „í™˜ìœ¼ë¡œ í•´ê²° ì˜ˆì •)
ì„œë²„ ì¬ì‹œì‘ ì‹œ ëª¨ë“  ìŠ¤ì¼€ì¤„ ì†ì‹¤
â†’ EventBridge Schedulerë¡œ ì˜êµ¬ ì €ì¥

---

## AWS ì•„í‚¤í…ì²˜ (ëª©í‘œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Vercel (Frontend)                          â”‚
â”‚                     React PWA ìœ ì§€                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway + Lambda                         â”‚
â”‚              ë˜ëŠ” ECS Fargate (NestJS)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚              â”‚              â”‚              â”‚
         â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase  â”‚  â”‚ElastiCacheâ”‚  â”‚EventBridgeâ”‚  â”‚    CloudWatch     â”‚
â”‚PostgreSQL â”‚  â”‚  Redis    â”‚  â”‚ Scheduler â”‚  â”‚    Monitoring     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬: EventBridge Scheduler
- ì‚¬ìš©ìë³„ ê°œì¸ ìŠ¤ì¼€ì¤„ì„ ê°ê° ë“±ë¡
- ì„œë²„ ì¬ì‹œì‘ê³¼ ë¬´ê´€í•˜ê²Œ ì˜êµ¬ ì €ì¥
- ì´ˆ ë‹¨ìœ„ ì •í™•ë„
- ì›” 1,400ë§Œ í˜¸ì¶œ ë¬´ë£Œ

---

*ì „ì—­ ì„¤ì • ì°¸ì¡°: `workspace/CLAUDE.md`, `SUPABASE_RULES.md`*
