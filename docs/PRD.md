# 출퇴근 메이트 — PRD v2.0

> v2.0 | 2026-02-19 | Native App Pivot

## Vision

**"7:52에 나가세요"** — 매일 아침, 생각할 필요 없이 최적의 출발 시각을 알려주는 출퇴근 코치.

잠금화면 위젯 하나로 날씨 + 미세먼지 + 실시간 교통 + 추천 출발 시각을 보여주고,
Geofence로 출퇴근을 자동 기록하여 개인 패턴을 분석하고 최적화한다.

## Problem Statement

매일 아침 출근 전, 직장인은 이런 질문을 한다:
1. "오늘 날씨 어때?" → 날씨 앱
2. "미세먼지 괜찮아?" → 미세먼지 앱
3. "지하철 언제 와?" → 카카오맵
4. "지금 나가도 늦지 않지?" → 감으로 판단

4가지 앱을 열거나, 감에 의존한다. **이 의사결정을 0초로 만든다.**

## Core Differentiator

**카카오맵이 "A에서 B로 가는 방법"을 알려준다면,
출퇴근 메이트는 "A에서 B로 가는 습관을 최적화"한다.**

| 경쟁 앱 | 하는 것 | 안 하는 것 |
|--------|--------|----------|
| 카카오맵 | 경로 탐색, 실시간 교통 | 날씨 연동, 개인 패턴 분석 |
| 기본 날씨 | 날씨, 미세먼지 | 교통, 출발 시각 추천 |
| 지하철종결자 | 지하철 도착 | 날씨, 버스, 개인화 |
| **출퇴근 메이트** | **통합 브리핑 + 최적 출발 추천 + 패턴 분석** | |

## Target User

- 대중교통(지하철/버스)으로 출퇴근하는 수도권 직장인
- 매일 같은 경로로 출퇴근하는 사용자
- 출근 시간을 최적화하고 싶은 사용자

## Tech Stack (v2.0)

### Mobile App
- **React Native + Expo** (managed workflow + config plugins)
- expo-router (file-based navigation)
- expo-notifications (FCM/APNs)
- expo-location (Geofencing)
- iOS WidgetKit (via config plugin)
- Android Glance Widget

### Backend (기존 유지)
- NestJS + TypeORM + PostgreSQL (Supabase)
- AWS ECS Fargate + CloudFront + EventBridge
- 50+ API endpoints 그대로 재사용

### Migration Path
- PWA (현재) → Native App (v2.0)
- 알림톡 (Solapi) → FCM/APNs Push
- Web Push → Native Push
- 브라우저 위젯 없음 → iOS/Android 홈 위젯

---

## Phase 1: 작동하는 위젯 (2주)

> 목표: 앱스토어에 올릴 수 있는 MVP. 위젯 + 푸시 + 핵심 화면.

### 기능 스코프

| 기능 | 세부 | 우선순위 |
|------|------|:-------:|
| **위젯** | 날씨 + 교통 + 다음 알림 시간 (iOS Small/Medium) | P0 |
| **홈 화면** | 출근 브리핑 + 실시간 교통 + 경로 | P0 |
| **푸시 알림** | EventBridge → FCM/APNs (알림톡 대체) | P0 |
| **알림 설정** | CRUD + 토글 (기존 API 연동) | P0 |
| **경로 설정** | 기존 경로 조회/설정 (기존 API 연동) | P1 |
| **설정** | 프로필, 로그인/로그아웃 | P1 |
| **알림 기록** | 발송 기록 조회 | P2 |

### 위젯 레이아웃

```
┌──── Small (2×2) ─────────┐
│  7°C ☀️  좋음             │
│  강남역 → 홍대 29분       │
│  다음 알림 07:00          │
└──────────────────────────┘

┌──── Medium (4×2) ────────────────────────┐
│  7°C ☀️ 맑음   미세먼지 좋음              │
│  🚇 강남역 → 홍대입구 29분                │
│  🚇 선릉역 → 홍대입구 31분                │
│  다음 알림 07:00                          │
└──────────────────────────────────────────┘
```

### Week 1
- Day 1-2: Expo 프로젝트 셋업 + 네비게이션 + 인증 (JWT)
- Day 3-4: 홈/알림/경로/설정 핵심 화면 (기존 API 연동)
- Day 5: FCM/APNs 푸시 설정 + 백엔드 푸시 채널 추가

### Week 2
- Day 1-3: iOS WidgetKit + Android Widget 구현
- Day 4: 통합 테스트 + 버그 수정
- Day 5: 앱 아이콘/스플래시 + TestFlight/내부 테스트 배포

---

## Phase 2: 스마트 출발 (2주~1개월)

> 목표: "7:52에 나가세요" — 최적 출발 시각 추천 + 자동 출퇴근 감지

### 기능 스코프

| 기능 | 세부 |
|------|------|
| **스마트 출발 알림** | optimal-departure API → 위젯/푸시에 "추천 출발 시각" 표시 |
| **상황 인식 브리핑** | "코트 입으세요" / "마스크 필수" / "2호선 지연 중" |
| **Geofence 자동 감지** | 집/회사 반경 → 자동 출발/도착 기록 |
| **퇴근 모드** | 퇴근 시 교통 정보 + 귀가 시간 예측 |
| **Live Activity (iOS)** | 출퇴근 중 실시간 경과 시간 표시 |

### 위젯 업그레이드

```
┌──── Medium (4×2) ────────────────────────┐
│  7°C ☀️ 맑음   미세먼지 좋음              │
│  추천 출발: 7:52  ← 8분 후               │
│  🚇 강남역 29분 | 🚇 선릉역 31분          │
│  코트 입으세요 ☁️                         │
└──────────────────────────────────────────┘
```

---

## Phase 3: 출퇴근 코치 (1~2개월)

> 목표: 데이터 기반 개인화 + 습관 형성 시스템

### 기능 스코프

| 기능 | 세부 |
|------|------|
| **패턴 분석 ML** | 요일/날씨/계절별 출퇴근 시간 예측 모델 |
| **도전/목표** | "이번 주 40분 이내 출근 3일" 같은 미션 |
| **스트릭 강화** | 연속 기록 + 마일스톤 + 배지 |
| **주간/월간 리포트** | "비 오는 날 평균 +12분" 인사이트 |
| **대안 경로 제시** | "2호선 지연 → 9호선 환승이 12분 빠름" |
| **연간 출퇴근 연감** | 감정적 가치 — 삭제하기 아까운 기록 |

---

## Phase 4: 데이터 플라이휠 (1개월)

> 목표: 사용자 수 증가 → 데이터 품질 증가 → 예측 정확도 증가 → 사용자 증가

### 기능 스코프

| 기능 | 세부 |
|------|------|
| **구간별 혼잡도** | 사용자 데이터 기반 실시간 구간 소요 시간 |
| **지역별 인사이트** | "강남 출퇴근러 평균 48분" 통계 |
| **소셜 기능** | 같은 경로 출퇴근러 커뮤니티 (선택) |
| **예측 고도화** | 사용자 수 비례 정확도 향상 (네트워크 효과) |

---

## Timeline

```
2026-02 ──── Phase 1: 작동하는 위젯 ──── 2주 (3/5 완료 목표)
2026-03 ──── Phase 2: 스마트 출발    ──── 3주
2026-04 ──── Phase 3: 출퇴근 코치    ──── 4주
2026-05 ──── Phase 4: 데이터 플라이휠 ──── 3주
```

## Metrics (성공 지표)

| Phase | 지표 | 목표 |
|-------|------|------|
| 1 | 앱스토어 출시 | ✅ |
| 1 | 위젯 설치율 (DAU 중) | > 50% |
| 2 | 스마트 출발 알림 정확도 | > 80% (10분 이내 오차) |
| 2 | 자동 기록 성공률 | > 90% |
| 3 | 주간 활성 사용일 | > 4일/주 |
| 3 | 30일 리텐션 | > 40% |
| 4 | 예측 정확도 (3개월 데이터) | > 90% |

## Monetization (Phase 4 이후)

| Tier | 가격 | 기능 |
|------|------|------|
| Free | 0원 | 위젯 (날씨+교통) + 수동 기록 |
| Pro | 월 1,900~2,900원 | 스마트 출발 알림 + 자동 기록 + 상세 분석 |

---

*v1.0 (2026-02-13): PWA + 알림톡 MVP*
*v2.0 (2026-02-19): Native App Pivot — 위젯 + 자동 감지 + 출퇴근 코치*
