# Cycle 55: P3-5 Alternative Route Suggestion Frontend

**Date**: 2026-03-02
**Status**: Complete

## Summary

Implemented the frontend for the Alternative Route Suggestion feature (P3-5). This feature queries the backend delay-status API and displays real-time transit delay information with alternative route suggestions on the Home page.

## Changes

### New Files
- `frontend/src/infrastructure/query/use-delay-status-query.ts` - React Query hook for route delay status (30s stale, 60s poll)
- `frontend/src/presentation/pages/home/DelayAlertBanner.tsx` - Main delay alert banner component
- `frontend/src/presentation/pages/home/AlternativeCard.tsx` - Alternative route card sub-component
- `frontend/src/presentation/pages/home/DelayAlertBanner.test.tsx` - 10 tests for DelayAlertBanner
- `frontend/src/presentation/pages/home/AlternativeCard.test.tsx` - 8 tests for AlternativeCard
- `frontend/src/presentation/styles/pages/delay-alert.css` - Mobile-first CSS styles

### Modified Files
- `frontend/src/infrastructure/api/commute-api.client.ts` - Added delay-status types and `getRouteDelayStatus()` method
- `frontend/src/infrastructure/api/index.ts` - Re-exported new types
- `frontend/src/infrastructure/query/query-keys.ts` - Added `delayStatus` query key
- `frontend/src/presentation/pages/home/HomePage.tsx` - Integrated DelayAlertBanner before CommuteSection
- `frontend/src/__mocks__/infrastructure/api/index.ts` - Added delay-status mock types and mock method

## Feature Details

### Delay Alert Banner
- Shows nothing when status is `normal` (no visual noise)
- Yellow banner for `minor_delay` (1-4 min)
- Orange banner for `delayed` (5-9 min) with alternatives
- Red banner for `severe_delay` (10+ min) with alternatives
- Gray banner for `unavailable`
- Expandable "지연 상세" section showing affected segments
- ARIA: `role="alert"`, `aria-live="polite"`, proper toggle aria attributes

### Alternative Card
- Shows description, time savings badge, step-by-step route
- Each step has transport mode icon (walk/subway/bus), from/to, duration
- Confidence indicator: high (green), medium (yellow), low (gray)
- Compact design fitting inside the delay banner

## Verification

| Check | Result |
|-------|--------|
| TypeScript (`tsc --noEmit`) | 0 errors |
| ESLint (`--max-warnings=0`) | 0 warnings |
| Tests | 496 passed, 1 pre-existing failure (time-dependent `use-commute-mode.test.ts`) |
| New tests | 18 passed (10 DelayAlertBanner + 8 AlternativeCard) |
| Build | Success |
| Bundle increase | ~3.9KB gzip (CSS 1.4KB + JS 2.5KB) - within 5KB budget |

## Architecture Notes

- React Query hook polls every 60 seconds with 30-second stale time for real-time data
- Only fires when user has an active route (enabled: !!routeId)
- Component renders null when loading or normal status - zero overhead when no delays
- Uses existing singleton pattern for API client
- CSS follows existing project patterns (CSS variables, mobile-first)
